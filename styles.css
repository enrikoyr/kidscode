/* --- Cute Map Styles --- */
:root{
  --bg:#96d5ff;
  --ink:#0b1220;
  --muted: #245b7d;
  --glass: rgba(255,255,255,.35);
  --glass-stroke: rgba(255,255,255,.6);
  --primary:#ff5ca8;
  --secondary:#ffcf4b;
  --ease:cubic-bezier(.2,.8,.2,1);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:'Nunito', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  color:var(--ink);
  background: radial-gradient(1200px 800px at 20% -10%, #c8eaff 0%, transparent 60%), var(--bg);
  overflow-x:hidden;
}
h1,h2,h3{font-family:'Baloo 2', cursive; margin:0 0 .35rem}
h1{font-weight:800; font-size:clamp(20px,3vw,34px)}
h2{font-weight:800; font-size:clamp(18px,2.2vw,26px)}
h3{font-weight:800; font-size:clamp(16px,2vw,22px)}
.muted{color:var(--muted)}
.grad{background: linear-gradient(45deg, var(--primary), #7d5cff); -webkit-background-clip:text; background-clip:text; color:transparent}

.glass{
  background:var(--glass);
  border:1.5px solid var(--glass-stroke);
  backdrop-filter: blur(8px);
  border-radius:22px;
  box-shadow: 0 20px 40px rgba(0,0,0,.08);
}

.topbar{
  position:sticky; top:0; z-index:5;
  margin:12px; padding:10px 14px;
  display:flex; align-items:center; justify-content:space-between;
}
.brand{display:flex; align-items:center; gap:10px;}
.logo{font-size:28px; filter:drop-shadow(0 2px 0 rgba(0,0,0,.08));}

.actions{display:flex; gap:8px;}
.btn{
  font:inherit; padding:10px 14px; border-radius:999px; border:2px solid transparent;
  background:white; cursor:pointer; transition:.2s var(--ease) transform, .2s box-shadow;
}
.btn:hover{ transform: translateY(-1px); box-shadow:0 8px 16px rgba(0,0,0,.12);}
.btn.pill{background:linear-gradient(white, #f9fbff);}
.btn.primary{background: linear-gradient(180deg, var(--secondary), #ff9ecb); border-color:#fff}
.wrap{
  display:grid; gap:14px; padding:16px; grid-template-columns: 320px 1fr;
}
@media (max-width: 900px){
  .wrap{ grid-template-columns: 1fr; }
}

.sidebar{ padding:18px; }
.level-list{ list-style:none; margin:12px 0 0; padding:0; display:grid; gap:10px;}
.level-item{
  display:flex; align-items:center; gap:12px; padding:10px 12px; border-radius:14px; background:rgba(255,255,255,.7);
  border:1px dashed rgba(0,0,0,.08);
}
.level-item .tag{ font-weight:800; color:var(--primary); }

.map-card{ padding:12px; min-height:60vh;}
.map-wrap{ position:relative; border-radius:18px; overflow:hidden; }
.map-image{ width:100%; display:block; border-radius:18px; border:3px solid rgba(255,255,255,.65); }

.node{
  position:absolute;
  left:var(--x); top:var(--y);
  transform: translate(-50%, -50%);
  width:48px; height:48px; border-radius:50%;
  border:none; cursor:pointer;
  background: radial-gradient(circle at 35% 30%, #fff 0%, #ffe7f2 48%, #ffd2ea 100%);
  box-shadow: 0 6px 0 #ca2a72, 0 10px 16px rgba(0,0,0,.2);
  display:grid; place-items:center;
  transition: transform .18s var(--ease), box-shadow .18s var(--ease);
}
.node .ring{
  width:22px; height:22px; border-radius:50%; border:6px solid var(--primary); background:#fff;
  box-shadow: inset 0 0 0 3px #fff;
}
.node .emoji{ font-size:22px; transform: translateY(-1px); }
.node.boss{ width:64px; height:64px; box-shadow:0 8px 0 #7b51ff, 0 14px 20px rgba(0,0,0,.25);}
.node.goal{ background: radial-gradient(circle at 50% 45%, #fff, #ffeac1 60%, #ffd16b); box-shadow:0 6px 0 #da8f14, 0 10px 16px rgba(0,0,0,.2);}
.node:hover{ transform: translate(-50%, -50%) scale(1.05); }
.node:active{ transform: translate(-50%, -50%) scale(.97); box-shadow: 0 3px 0 rgba(0,0,0,.2);}
.pulse::after{
  content:""; position:absolute; inset:-6px; border-radius:inherit;
  border:3px dashed rgba(255,255,255,.9); animation: pulse 2s infinite linear;
}
@keyframes pulse{
  0%{ transform: scale(1); opacity:.9;}
  100%{ transform: scale(1.25); opacity:0;}
}

.hint{
  position:absolute; padding:.35rem .6rem; font-weight:800; color:#0b3a57; background:#fff;
  border-radius:999px; border:2px solid rgba(0,0,0,.08);
  box-shadow:0 6px 12px rgba(0,0,0,.08);
}
.hint.floating{ left:10%; top:8%; animation: float 3.4s var(--ease) infinite;}
.hint.floating.right{ left:auto; right:6%; top:15%; animation-delay: .8s;}
@keyframes float{ 0%,100%{ transform:translateY(0)} 50%{ transform:translateY(-6px)} }

/* modal */
.modal-backdrop{ position:fixed; inset:0; display:grid; place-items:center; background: rgba(20,40,60,.35); backdrop-filter: blur(4px); }
.modal{ width:min(640px, 96vw); padding:18px; position:relative; }
.close{ position:absolute; right:8px; top:8px; border:none; background:transparent; font-size:20px; cursor:pointer; }
.badges{ display:flex; gap:8px; margin:.5rem 0 1rem; }
.badges .badge{ font-size:22px; filter: drop-shadow(0 2px 0 rgba(0,0,0,.08)); }
.modal-actions{ display:flex; gap:8px; justify-content:flex-end; }

.foot{ text-align:center; padding:10px 0 30px; }

/* twinkling stars */
.stars::before,.stars::after{
  content:""; position:fixed; inset:-50px; pointer-events:none; background:
    radial-gradient(2px 2px at 20% 10%, #ffffffcc 50%, transparent 51%),
    radial-gradient(2px 2px at 80% 35%, #ffffffcc 50%, transparent 51%),
    radial-gradient(1.5px 1.5px at 60% 80%, #ffffffcc 50%, transparent 51%),
    radial-gradient(2px 2px at 10% 70%, #ffffffcc 50%, transparent 51%),
    radial-gradient(1.5px 1.5px at 40% 30%, #ffffffcc 50%, transparent 51%);
  animation: twinkle 8s linear infinite;
  opacity:.6;
}
.stars::after{ animation-duration: 11s; opacity:.4;}
@keyframes twinkle { from{ transform: translateY(0);} to{ transform: translateY(20px);} }
